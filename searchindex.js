Search.setIndex({"docnames": ["devguide", "hooks", "index", "projects"], "filenames": ["devguide.rst", "hooks.rst", "index.rst", "projects.rst"], "titles": ["Developer Guide", "Hooks", "pubtools", "Project Overview"], "terms": {"thi": [0, 1, 3], "document": [0, 1, 2, 3], "i": [0, 1, 2, 3], "refer": [0, 2], "within": [0, 1, 2, 3], "pubtool": [0, 1, 3], "famili": [0, 1, 2, 3], "If": [0, 1], "you": [0, 1, 3], "ar": [0, 1, 2, 3], "introduc": 0, "new": 0, "pleas": 0, "follow": [0, 1, 2], "For": [0, 1], "librari": [0, 1, 2], "foo": [0, 1], "where": [0, 1], "identifi": 0, "most": [0, 2], "relev": 0, "system": [0, 1, 3], "exampl": [0, 1], "pulp": [0, 1, 3], "push": [0, 1, 3], "put": 0, "all": [0, 1], "python": [0, 2], "code": [0, 1, 3], "under": [0, 1], "namespac": [0, 1], "mean": 0, "scope": [0, 2], "provid": [0, 3], "console_script": 0, "base": [0, 1], "describ": [0, 2], "later": [0, 3], "section": [0, 1], "ani": [0, 1], "other": 0, "kind": 0, "associ": [0, 1, 3], "specif": 0, "give": 0, "sensibl": 0, "can": [0, 1, 2], "gener": [0, 3], "do": [0, 1], "have": [0, 1], "prefix": 0, "should": [0, 1], "aim": 0, "compat": 0, "environ": [0, 3], "2": [0, 3], "6": 0, "ye": 0, "realli": 0, "3": 0, "9": 0, "red": 0, "hat": 0, "flavor": 0, "oper": [0, 1, 3], "rhel": 0, "cento": 0, "fedora": 0, "The": [0, 1], "requir": 0, "support": [0, 3], "like": [0, 1], "drop": 0, "dure": [0, 1, 3], "2022": 0, "standard": [0, 1], "entri": [0, 1], "point": [0, 1], "see": [0, 1, 2], "setuptool": 0, "manual": 0, "inform": [0, 1], "project_nam": 0, "task_nam": 0, "ha": [0, 1], "publish": [0, 1, 2, 3], "which": [0, 1, 2], "defin": 0, "py": [0, 1], "entry_point": [0, 1], "_pulp": 0, "accept": 0, "necessari": [0, 1], "perform": 0, "work": [0, 1], "command": 0, "line": 0, "read": [0, 2, 3], "from": [0, 1, 3], "sy": [0, 1], "argv": 0, "prefer": 0, "method": [0, 1], "e": [0, 1, 3], "g": [0, 3], "argpars": 0, "secret": 0, "variabl": 0, "o": 0, "usual": 0, "recommend": 0, "pass": [0, 1], "note": [0, 1], "data": 0, "local": [0, 3], "file": [0, 3], "becaus": [0, 2], "break": 0, "least": 0, "complic": 0, "paradigm": [0, 3], "must": [0, 1], "somehow": 0, "arrang": 0, "those": 0, "deploi": 0, "onto": [0, 1], "clean": 0, "up": [0, 1], "when": [0, 1, 3], "longer": [0, 1], "need": [0, 1], "There": [0, 1], "": [0, 1], "notabl": [0, 3], "except": [0, 1], "process": [0, 1, 3], "veri": [0, 3], "larg": 0, "amount": [0, 1], "mai": [0, 1, 3], "find": 0, "list": [0, 1, 2, 3], "becom": 0, "too": 0, "long": 0, "launch": 0, "argmax": 0, "problem": 0, "sinc": 0, "doesn": 0, "t": [0, 1], "howev": 0, "limit": 0, "interfer": 0, "test": 0, "therefor": 0, "wish": 0, "add": [0, 1], "some": [0, 1, 3], "option": [0, 1], "function": [0, 1, 3], "workaround": 0, "primarili": [0, 3], "approach": [0, 1], "produc": 0, "we": [0, 1, 3], "style": 0, "here": [0, 1], "side": [0, 1], "effect": [0, 1], "implement": [0, 2], "messag": 0, "pushcollector": [0, 3], "save": [0, 3], "addit": [0, 1], "small": [0, 1], "item": [0, 1, 3], "metadata": [0, 3], "snapshot": 0, "json": 0, "format": [0, 1], "remot": 0, "resourc": 0, "prior": 0, "updat": [0, 1], "ensur": [0, 1], "an": [0, 1], "audit": 0, "trail": 0, "exist": 0, "design": [0, 3], "two": [0, 1, 2], "differ": [0, 1], "context": 0, "signific": 0, "between": [0, 1], "them": [0, 1], "These": [0, 3], "invok": [0, 3], "directli": 0, "tool": [0, 2, 3], "servic": [0, 1, 2, 3], "tabl": 0, "summar": 0, "major": 0, "usag": [0, 1], "scenario": [0, 1], "emerg": 0, "product": 0, "popul": 0, "set": [0, 1, 3], "caller": [0, 1], "stdout": 0, "connect": 0, "redirect": 0, "subsystem": 0, "default": 0, "empti": [0, 1], "hook": [0, 2], "avail": [0, 1], "hookimpl": [0, 1], "bound": [0, 1], "backend": 0, "In": [0, 1, 3], "principl": 0, "abl": 0, "integr": 0, "number": 0, "practic": 0, "almost": 0, "alwai": 0, "one": [0, 1], "known": [0, 1, 2], "pub": [0, 2], "common": [0, 3], "across": [0, 1], "below": 0, "best": [0, 1], "consist": 0, "help": [0, 3], "error": 0, "while": 0, "case": [0, 1], "want": [0, 1], "both": 0, "simultan": 0, "kei": [0, 1], "val1": 0, "val2": 0, "val3": 0, "tend": 0, "simpler": 0, "programmat": 0, "more": [0, 1, 2], "user": 0, "friendli": 0, "human": 0, "Of": 0, "cours": [0, 1], "themselv": [0, 1], "contain": [0, 1, 3], "charact": 0, "As": 0, "explain": [0, 1], "refrain": 0, "respons": 0, "commonli": [0, 2], "aris": 0, "verbos": 0, "suggest": 0, "semant": 0, "root": 0, "info": 0, "than": 0, "onc": [0, 1], "even": 0, "perhap": 0, "depend": [0, 1], "how": [0, 2], "time": [0, 1], "keep": [0, 1], "mind": 0, "intend": [0, 1], "purpos": [0, 1], "onli": [0, 1], "never": 0, "run": [0, 1], "might": 0, "made": 0, "sever": 0, "discret": 0, "allow": [0, 1], "certain": 0, "so": [0, 1], "b": 0, "c": 0, "don": [0, 1], "guidelin": 0, "advic": 0, "valid": 0, "unknown": 0, "simpli": 0, "ignor": 0, "would": 0, "make": [0, 1], "brittl": 0, "remov": [0, 1], "backward": 0, "incompat": 0, "re": [0, 1], "familiar": 0, "ansibl": 0, "compar": 0, "tag": [0, 1], "specifi": [0, 1], "match": [0, 1], "zero": [0, 1], "audienc": 0, "includ": [0, 3], "power": [0, 1], "By": [0, 1], "right": [0, 1], "thing": 0, "without": [0, 1], "It": [0, 1], "focu": 0, "part": 0, "fail": [0, 1], "non": [0, 1], "critic": 0, "portion": 0, "expect": [0, 1], "possibl": [0, 1], "combin": 0, "shall": [0, 1], "consum": 0, "strongli": 0, "url": [0, 1], "discourag": 0, "strictli": 0, "forward": 0, "featur": [0, 1], "improv": 0, "futur": 0, "version": 0, "modul": [0, 1], "mode": 0, "object": [0, 1], "orient": 0, "write": 0, "stderr": 0, "although": 0, "mention": 0, "earlier": 0, "last": [0, 1], "resort": 0, "lose": 0, "valuabl": 0, "reli": 0, "bad": 0, "alreadi": 0, "call": [0, 1], "adjust": [0, 1], "overwrit": 0, "particularli": 0, "consid": [0, 1], "interf": 0, "basicconfig": 0, "behavior": [0, 1], "instal": [0, 1], "basic": [0, 1], "simpl": [0, 3], "wai": [0, 2], "correctli": 0, "insert": 0, "top": [0, 1], "hierarchi": 0, "predict": 0, "control": 0, "each": [0, 1, 3], "typic": [0, 1], "interest": [0, 1], "hidden": 0, "anyth": [0, 1], "end": [0, 1], "enough": 0, "caus": [0, 1], "issu": 0, "unreason": 0, "noisi": 0, "warn": 0, "indic": [0, 1], "potenti": [0, 1], "fatal": 0, "ad": 0, "encount": 0, "elsewher": 0, "someth": [0, 1], "certainli": 0, "gone": 0, "wrong": 0, "action": 0, "recover": 0, "retri": 0, "exhaust": 0, "sometim": 0, "concern": 0, "confus": 0, "ultim": 0, "succeed": 0, "A": [0, 1, 3], "rule": 0, "thumb": 0, "ask": 0, "yourself": 0, "path": [0, 1], "reach": 0, "ticket": 0, "bug": 0, "me": 0, "answer": [0, 1], "No": 0, "event": [0, 1], "dict": 0, "arbitrari": 0, "pair": 0, "attribut": 0, "form": 0, "type": [0, 1], "happen": [0, 1], "brief": [0, 2], "string": [0, 1], "what": 0, "just": [0, 1], "key1": 0, "value1": 0, "field": [0, 1], "relat": [0, 3], "key2": 0, "value2": 0, "timestamp": 0, "impli": 0, "creat": [0, 1], "collect": [0, 3], "variou": 0, "record": 0, "metric": 0, "whenev": 0, "order": [0, 1], "monitor": 0, "health": 0, "pulplib": [0, 1, 3], "queue": 0, "still": 0, "wait": 0, "load": 0, "running_count": 0, "waiting_count": 0, "await": 0, "though": 0, "few": [0, 1], "x": [0, 3], "start": [0, 1], "current": [0, 1, 3], "complet": [0, 1], "normal": [0, 1], "return": [0, 1], "earli": 0, "due": [0, 1], "project": [1, 2], "extend": 1, "via": [1, 3], "callback": 1, "pluggi": 1, "mainli": 1, "us": [1, 3], "subscrib": 1, "dispatch": 1, "enabl": [1, 3], "trigger": 1, "bar": 1, "direct": 1, "host": [1, 2, 3], "task": [1, 2], "otherwis": [1, 3], "noth": 1, "next": 1, "crash": 1, "also": [1, 3], "emit": 1, "your": 1, "befor": 1, "done": 1, "decor": 1, "import": 1, "pm": 1, "plain": 1, "old": 1, "doc": 1, "circumst": 1, "def": 1, "kettle_on": 1, "kettl": 1, "immedi": 1, "turn": 1, "kettle_off": 1, "after": 1, "been": 1, "off": 1, "plugin": 1, "add_hookspec": 1, "__name__": 1, "Be": 1, "awar": 1, "flat": 1, "take": 1, "care": 1, "avoid": 1, "name": 1, "clash": 1, "forget": 1, "won": 1, "At": 1, "appropri": 1, "accord": 1, "make_tea": 1, "fill_wat": 1, "notifi": 1, "anyon": 1, "start_boil": 1, "wait_boil": 1, "again": 1, "proce": 1, "cup": 1, "sourc": [1, 3], "regist": 1, "lifo": 1, "abov": [1, 3], "show": 1, "pure": 1, "emitt": 1, "advanc": 1, "pattern": 1, "valu": 1, "receiv": 1, "declar": 1, "belong": 1, "signatur": [1, 3], "exactli": 1, "correspond": 1, "previou": 1, "huge": 1, "spike": 1, "consumpt": 1, "d": 1, "better": 1, "reserv": 1, "http": 1, "en": 1, "wikipedia": 1, "org": 1, "wiki": 1, "tv_pickup": 1, "powerbank": 1, "extra": 1, "disabl": 1, "unsur": 1, "whether": 1, "group": 1, "enforc": 1, "task_context": 1, "setup": [1, 2], "left": 1, "hand": 1, "_impl": 1, "could": 1, "thread": 1, "block": 1, "inappropri": 1, "rais": 1, "propag": 1, "upward": 1, "through": 1, "naiv": 1, "standalon": [1, 3], "mechan": 1, "instanc": 1, "maintain": 1, "count": 1, "boil": 1, "exclud": 1, "antipattern": 1, "mutat": 1, "global": 1, "realist": 1, "around": 1, "stage": 1, "first": 1, "attach": 1, "initi": 1, "establish": 1, "task_start": 1, "desir": 1, "class": 1, "kettlespikehandl": 1, "__init__": 1, "self": 1, "configur": 1, "myself": 1, "etc": 1, "now": 1, "state": 1, "kettlecount": 1, "0": 1, "ok": 1, "its": 1, "own": 1, "level": [1, 3], "task_stop": 1, "tear": 1, "down": 1, "convent": [1, 2], "uniformli": 1, "pluginmanag": 1, "lifecycl": 1, "statement": 1, "do_task": 1, "resolv": 1, "enter": 1, "exit": 1, "get_cert_key_path": 1, "pulp_repository_pre_publish": 1, "pulp_repository_publish": 1, "task_pulp_flush": 1, "pulp_item_push_finish": 1, "quai": [1, 3], "quay_repositories_clear": 1, "quay_repositories_remov": 1, "quay_images_tag": 1, "quay_images_untag": 1, "wa": 1, "unregist": 1, "paramet": 1, "bool": 1, "true": 1, "server_url": 1, "get": 1, "locat": 1, "ssl": 1, "certif": 1, "authent": 1, "given": 1, "multipl": 1, "canon": 1, "pem": 1, "permit": 1, "cert": 1, "same": 1, "prepar": 1, "result": 1, "reason": 1, "fallback": 1, "strategi": 1, "str": 1, "repositori": 1, "step": 1, "none": 1, "replac": 1, "arg": 1, "publishopt": 1, "successfulli": 1, "execut": [1, 3], "success": 1, "maximum": 1, "per": 1, "fulli": 1, "date": 1, "flush": 1, "deriv": 1, "cach": 1, "recent": 1, "chang": 1, "pulp_unit": 1, "push_item": 1, "referenc": 1, "unit": 1, "upload": 1, "cdn": 1, "everi": 1, "subset": 1, "pushitem": 1, "repository_id": 1, "clear": 1, "id": 1, "source_ref": 1, "dest_ref": 1, "imag": [1, 3], "destin": 1, "untag_ref": 1, "lost_ref": 1, "untag": 1, "were": 1, "digest": 1, "reachabl": 1, "overview": 2, "helper": 2, "develop": 2, "guid": 2, "understand": 2, "argument": 2, "log": 2, "api": [2, 3], "compris": 2, "content": [2, 3], "workflow": 2, "firstli": 2, "short": 2, "secondli": 2, "To": 2, "learn": 2, "about": 2, "explan": 2, "page": 3, "close": 3, "either": 3, "rpm": 3, "well": 3, "iib": 3, "manipul": 3, "bundl": 3, "pyxi": 3, "io": 3, "conserv": 3, "pushsourc": 3, "access": 3, "varieti": 3, "koji": 3, "build": 3, "advisori": 3, "errata": 3, "directori": 3, "facad": 3, "artifact": 3, "glue": 3, "v": 3, "discard": 3, "databas": 3, "high": 3, "somewhat": 3, "opinion": 3, "client": 3, "legaci": 3, "outsid": 3}, "objects": {"": [[1, 0, 1, "", "get_cert_key_paths"], [1, 0, 1, "", "pulp_item_push_finished"], [1, 0, 1, "", "pulp_repository_pre_publish"], [1, 0, 1, "", "pulp_repository_published"], [1, 0, 1, "", "quay_images_tagged"], [1, 0, 1, "", "quay_images_untagged"], [1, 0, 1, "", "quay_repositories_cleared"], [1, 0, 1, "", "quay_repositories_removed"], [1, 0, 1, "", "task_pulp_flush"], [1, 0, 1, "", "task_start"], [1, 0, 1, "", "task_stop"]], "pubtools.pluggy": [[1, 1, 1, "", "hookimpl"], [1, 1, 1, "", "hookspec"], [1, 1, 1, "", "pm"], [1, 0, 1, "", "task_context"]]}, "objtypes": {"0": "py:function", "1": "py:attribute"}, "objnames": {"0": ["py", "function", "Python function"], "1": ["py", "attribute", "Python attribute"]}, "titleterms": {"develop": 0, "guid": [0, 1], "project": [0, 3], "setup": 0, "name": 0, "target": 0, "platform": 0, "understand": 0, "task": [0, 3], "interfac": 0, "input": 0, "output": 0, "standalon": 0, "v": 0, "host": 0, "argument": 0, "convent": 0, "multipl": 0, "valu": 0, "debug": 0, "enabl": 0, "log": 0, "skip": 0, "step": 0, "execut": 0, "subset": 0, "sourc": 0, "obtain": 0, "content": [0, 1], "via": 0, "pushsourc": 0, "us": 0, "logger": 0, "primari": 0, "mechan": 0, "avoid": 0, "chang": 0, "configur": 0, "after": 0, "your": 0, "appropri": 0, "level": 0, "structur": 0, "extra": 0, "hook": 1, "overview": [1, 3], "provid": 1, "1": 1, "defin": 1, "hookspec": 1, "2": 1, "invok": 1, "implement": 1, "manag": 1, "context": 1, "api": 1, "refer": 1, "pubtool": 2, "introduct": 2, "librari": 3, "helper": 3}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx.ext.viewcode": 1, "sphinx": 57}, "alltitles": {"Developer Guide": [[0, "developer-guide"]], "Project setup": [[0, "project-setup"]], "Naming": [[0, "naming"]], "Target platforms": [[0, "target-platforms"]], "Understanding tasks": [[0, "understanding-tasks"]], "Task interface": [[0, "task-interface"]], "Inputs": [[0, "inputs"]], "Outputs": [[0, "outputs"]], "Standalone vs Hosted": [[0, "standalone-vs-hosted"]], "Argument conventions": [[0, "argument-conventions"]], "Arguments with multiple values": [[0, "arguments-with-multiple-values"]], "--debug: enable debug logging": [[0, "debug-enable-debug-logging"]], "--skip, --step: execute subset of task": [[0, "skip-step-execute-subset-of-task"]], "--source: obtain content via pushsource": [[0, "source-obtain-content-via-pushsource"]], "Logging": [[0, "logging"]], "Use loggers as primary output mechanism": [[0, "use-loggers-as-primary-output-mechanism"]], "Avoid changing logger configuration": [[0, "avoid-changing-logger-configuration"]], "Name loggers after your project": [[0, "name-loggers-after-your-project"]], "Use appropriate log levels": [[0, "use-appropriate-log-levels"]], "Structured logging via extra": [[0, "structured-logging-via-extra"]], "Hooks": [[1, "hooks"]], "Contents": [[1, "contents"]], "Overview": [[1, "overview"]], "Guide: hook providers": [[1, "guide-hook-providers"]], "1. Define hookspecs": [[1, "define-hookspecs"]], "2. Invoke hooks": [[1, "invoke-hooks"]], "Guide: hook implementers": [[1, "guide-hook-implementers"]], "Guide: managing context": [[1, "guide-managing-context"]], "API reference": [[1, "api-reference"]], "Hook reference": [[1, "hook-reference"]], "pubtools": [[2, "pubtools"]], "Introduction": [[2, "introduction"]], "Project Overview": [[3, "project-overview"]], "Task libraries": [[3, "task-libraries"]], "Helper libraries": [[3, "helper-libraries"]]}, "indexentries": {"built-in function": [[1, "get_cert_key_paths"], [1, "pulp_item_push_finished"], [1, "pulp_repository_pre_publish"], [1, "pulp_repository_published"], [1, "quay_images_tagged"], [1, "quay_images_untagged"], [1, "quay_repositories_cleared"], [1, "quay_repositories_removed"], [1, "task_pulp_flush"], [1, "task_start"], [1, "task_stop"]], "get_cert_key_paths()": [[1, "get_cert_key_paths"]], "hookimpl (pubtools.pluggy attribute)": [[1, "pubtools.pluggy.hookimpl"]], "hookspec (pubtools.pluggy attribute)": [[1, "pubtools.pluggy.hookspec"]], "pm (pubtools.pluggy attribute)": [[1, "pubtools.pluggy.pm"]], "pulp_item_push_finished()": [[1, "pulp_item_push_finished"]], "pulp_repository_pre_publish()": [[1, "pulp_repository_pre_publish"]], "pulp_repository_published()": [[1, "pulp_repository_published"]], "quay_images_tagged()": [[1, "quay_images_tagged"]], "quay_images_untagged()": [[1, "quay_images_untagged"]], "quay_repositories_cleared()": [[1, "quay_repositories_cleared"]], "quay_repositories_removed()": [[1, "quay_repositories_removed"]], "task_context() (in module pubtools.pluggy)": [[1, "pubtools.pluggy.task_context"]], "task_pulp_flush()": [[1, "task_pulp_flush"]], "task_start()": [[1, "task_start"]], "task_stop()": [[1, "task_stop"]]}})